#include "config.h"

//申
char code shen[] = {
0x00,0x00,0xF8,0x88,0x88,0x88,0x88,0xFF,0x88,0x88,0x88,0x88,0xF8,0x00,0x00,0x00,
0x00,0x00,0x1F,0x08,0x08,0x08,0x08,0xFF,0x08,0x08,0x08,0x08,0x1F,0x00,0x00,0x00,
};
//静
char code jing[] = {
0x44,0x54,0x54,0x7F,0x54,0x54,0x44,0x20,0x28,0x27,0xE4,0x34,0x2C,0xE0,0x00,0x00,
0x00,0xFF,0x15,0x55,0x95,0x7F,0x00,0x09,0x49,0x89,0x7F,0x09,0x09,0x1F,0x01,0x00,
};
//档
char code dang[] = {
0x10,0x10,0xD0,0xFF,0x90,0x10,0x40,0x42,0x5C,0x40,0x7F,0x40,0x50,0xCE,0x00,0x00,
0x04,0x03,0x00,0xFF,0x00,0x01,0x40,0x44,0x44,0x44,0x44,0x44,0x44,0xFF,0x00,0x00,
};
//位
char code wei[] = {
0x00,0x80,0x60,0xF8,0x07,0x10,0x90,0x10,0x11,0x16,0x10,0x10,0xD0,0x10,0x00,0x00,
0x01,0x00,0x00,0xFF,0x40,0x40,0x41,0x5E,0x40,0x40,0x70,0x4E,0x41,0x40,0x40,0x00,
};
//当
char code now[] = {
0x00,0x40,0x42,0x44,0x58,0x40,0x40,0x7F,0x40,0x40,0x50,0x48,0xC6,0x00,0x00,0x00,
0x00,0x40,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0x44,0xFF,0x00,0x00,0x00,
};
//前
char code qian[] = {
0x08,0x08,0xE8,0x29,0x2E,0x28,0xE8,0x08,0x08,0xC8,0x0C,0x0B,0xE8,0x08,0x08,0x00,
0x00,0x00,0xFF,0x09,0x49,0x89,0x7F,0x00,0x00,0x0F,0x40,0x80,0x7F,0x00,0x00,0x00,
};
//设
char code she[] = {
0x40,0x40,0x42,0xCC,0x00,0x40,0xA0,0x9E,0x82,0x82,0x82,0x9E,0xA0,0x20,0x20,0x00,
0x00,0x00,0x00,0x3F,0x90,0x88,0x40,0x43,0x2C,0x10,0x28,0x46,0x41,0x80,0x80,0x00,
};
//置
char code zhi[] = {
0x00,0x17,0x15,0xD5,0x55,0x57,0x55,0x7D,0x55,0x57,0x55,0xD5,0x15,0x17,0x00,0x00,
0x40,0x40,0x40,0x7F,0x55,0x55,0x55,0x55,0x55,0x55,0x55,0x7F,0x40,0x40,0x40,0x00,
};
//作
char code zuo[] = {
0x00,0x80,0x60,0xF8,0x07,0x40,0x30,0x0F,0xF8,0x88,0x88,0x88,0x88,0x08,0x08,0x00,
0x01,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0xFF,0x08,0x08,0x08,0x08,0x08,0x00,0x00,
};
//品
char code pin[] = {
0x00,0x00,0x00,0x7E,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x7E,0x00,0x00,0x00,0x00,
0x00,0xFE,0x42,0x42,0x42,0xFE,0x00,0x00,0x00,0xFE,0x42,0x42,0x42,0xFE,0x00,0x00,
};
//放
char code fang[] = {
0x08,0x08,0xF9,0x4A,0x48,0xC8,0x48,0x20,0xD8,0x17,0x10,0x10,0xF0,0x10,0x10,0x00,
0x40,0x30,0x0F,0x20,0x40,0x3F,0x80,0x40,0x21,0x16,0x08,0x16,0x21,0x40,0x80,0x00,
};
//大
char code da[] = {
0x20,0x20,0x20,0x20,0x20,0x20,0x20,0xFF,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x00,
0x80,0x80,0x40,0x20,0x10,0x0C,0x03,0x00,0x03,0x0C,0x10,0x20,0x40,0x80,0x80,0x00,
};
//倍
char code bei[] = {
0x00,0x80,0x60,0xF8,0x07,0x80,0x94,0xE4,0x85,0x86,0x84,0xC4,0xB4,0x84,0x80,0x00,
0x01,0x00,0x00,0xFF,0x00,0x00,0xFC,0x44,0x44,0x44,0x44,0x44,0x44,0xFC,0x00,0x00,
};
//数
char code shu[] = {
0x90,0x52,0x34,0x10,0xFF,0x10,0x34,0x52,0x80,0x70,0x8F,0x08,0x08,0xF8,0x08,0x00,
0x82,0x9A,0x56,0x63,0x22,0x52,0x8E,0x00,0x80,0x40,0x33,0x0C,0x33,0x40,0x80,0x00,
};
//数字
char code num[9][16] = {
{0x00,0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,},//1
{0x00,0x70,0x08,0x08,0x08,0x08,0xF0,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,},//2
{0x00,0x30,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x18,0x20,0x21,0x21,0x22,0x1C,0x00,},//3
{0x00,0x00,0x80,0x40,0x30,0xF8,0x00,0x00,0x00,0x06,0x05,0x24,0x24,0x3F,0x24,0x24,},//4
{0x00,0xF8,0x88,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x20,0x20,0x20,0x11,0x0E,0x00,},//5
{0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,},//:
{0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,},//全亮
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,},//全灭
{0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,},//0
};

//软件延时
void delayms(u8 time){
	u8 i ,j;
	for(i = 0; i < 200;i ++){
		for(j = 0; j < time; j++);
	}
}

//液晶忙判断
void lcdCheckBusy()
{
   LcdPort = 0x00; 

   RS = 0;  //
   RW = 1;  //读
   EN = 1;  //使能
   while(LcdPort & 0x80);
   EN = 0;	
}

//写命令
void lcdWriteCom(u8 com)
{
   lcdCheckBusy();
   RS = 0;//指令
   RW = 0;
   LcdPort = com;
   EN = 1;
   nop;
   EN = 0;
}

//写数据
void lcdWriteData(u8 dat)
{
   lcdCheckBusy();
   RS = 1; //数据
   RW = 0; //写
   LcdPort = dat;
   EN = 1;
   nop;
   EN = 0;
}

/*****************************************************************************
		函数功能:指定位置显示汉字16*16程序
*****************************************************************************/
void lcdDisWords(u8 page,u8 lie, u8 *hzk)
{
	u8 j = 0,i = 0;
	for(j = 0;j < 2;j++)
	{
		lcdWriteCom(0xb8 + page + j);
		lcdWriteCom(0x40 + lie);
		for(i = 0;i < 16;i++) 
			lcdWriteData(hzk[16*j + i]);
	}
}
//显示数字
void lcdDisNum(u8 page,u8 lie, u8 code *hzk)
{
	u8 j=0,i=0;
	for(j=0;j<2;j++)
	{
		lcdWriteCom(0xb8 + page + j);
		lcdWriteCom(0x40 + lie);
		for(i = 0;i < 8;i++) 
			lcdWriteData(hzk[8*j+i]);
	}
}

//清屏
void lcdClr()
{
	u8 j,k;
	CS1 = 0; //左、右屏均开显示
	CS2 = 0;
 	lcdWriteCom(0xb8 + 0);
 	lcdWriteCom(0x40 + 0);
 	for(k = 0;k < 8;k++)//控制页数0-7，共8页
 	{
		lcdWriteCom(0xb8 + k); //每页每页进行写
  		for(j = 0;j < 64;j++)  //每页最多可写32个中文文字或64个ASCII字符
		{
      	lcdWriteCom(0x40 + j);
			lcdWriteData(0x00);//控制列数0-63，共64列，写点内容，列地址自动加1
		}
	} 
}

//初始化
void lcdInit() 
{ 
	lcdWriteCom(0x3f);    //
	nop;nop;
	//lcdWriteCom(0x3e);   //8位数据传输 , 扩展指令操作 , 绘图开     
	lcdWriteCom(0xc0);    //
	lcdWriteCom(0xb8);    // 
	lcdWriteCom(0x40);    //
}

//显示图片
void show_Pic(u8 page,u8 lineaddress, u8 table[8][128])
{
	u8 i , j; 
	for(i=0;i<8;i++)
	{
			if(lineaddress<0X80)
			{
				CS1=0;
				CS2=1;
			}
			lcdWriteCom(page+i);
			lcdWriteCom(lineaddress);
			for(j=0;j<64;j++)
			{
				lcdWriteData(table[i][j]);
				lineaddress+=1;
			}

			if(lineaddress>=0X80)
			{
				CS1=1;
				CS2=0;
				lineaddress=lineaddress-0X40;
			}
			lcdWriteCom(page+i);
			lcdWriteCom(lineaddress);
			for(j=64;j<128;j++)
			{
				lcdWriteData(table[i][j]);
				lineaddress+=1;
			}
			if(lineaddress>=0X80)
			{
				lineaddress=lineaddress-0X40;
			}
		}
}
//值闪烁
void valueFlash(bit setFlag,u8 *chalnel){
	if(setFlag){
		if(++disTimeIndex == 500){
			disTimeIndex = 0;
			flash = ~flash;
			
			if(flash){ //闪烁
				lcdDisSetChalnel(6);//当前位置全亮
			}else{
				lcdDisSetChalnel(chalnel[0]);
			}
		}
	}
	else{
		lcdDisSetChalnel(chalnel[0]);
	}
	
	
}

//当前值
void lcdDisCurrentChalnel(u8 chalnel){
	showRight;
	lcdDisNum(2,8,num[chalnel]);
}
//设置值
void lcdDisSetChalnel(u8 chalnel){
	showRight;
	lcdDisNum(6,8,num[chalnel]);
}
//显示放大倍数
void lcdDisGain(u8 gain){
	showRight;
	switch(gain){
		case 0: {//1倍
			lcdDisNum(4,8,num[8]);
			lcdDisNum(4,16,num[8]);
			lcdDisNum(4,24,num[0]); 
		}
		break;
		case 1: {//10倍
			lcdDisNum(4,8,num[8]); 
			lcdDisNum(4,16,num[0]);
			lcdDisNum(4,24,num[8]);	
		}
		break;
		case 2 :{//100倍
			lcdDisNum(4,8,num[0]); 
			lcdDisNum(4,16,num[8]);
			lcdDisNum(4,24,num[8]);	
		}
		break;
		case 3:{//500倍
			lcdDisNum(4,8,num[4]); 
			lcdDisNum(4,16,num[8]);
			lcdDisNum(4,24,num[8]);	
		}
		break;
		default : break;
	}
}

//默认值
void lcdDisDefault(){
	showLeft;
	
	lcdDisWords(0,32,shen);//申
	lcdDisWords(0,48,jing);//静
	
	lcdDisWords(2,0,now); //当
	lcdDisWords(2,16,qian);//前
	lcdDisWords(2,32,dang);//档
	lcdDisWords(2,48,wei);//位
	
	lcdDisWords(4,0,fang);//
	lcdDisWords(4,16,da);//
	lcdDisWords(4,32,bei);//
	lcdDisWords(4,48,shu);//
	
	lcdDisWords(6,0,she);//设
	lcdDisWords(6,16,zhi);//置
	lcdDisWords(6,32,dang);//档
	lcdDisWords(6,48,wei);//位
	
	showRight;
	
	lcdDisWords(0,0,zuo);//作
	lcdDisWords(0,16,pin);//品
	lcdDisNum(2,0,num[5]);//:
	lcdDisNum(4,0,num[5]);//:
	
	lcdDisNum(4,8,num[8]);// 0
	lcdDisNum(4,16,num[8]);// 0
	lcdDisNum(4,24,num[0]);// 1
	lcdDisWords(4,32,bei);//倍
	
	lcdDisNum(6,0,num[5]);//:
}

char code photo[8][128] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF8,0xF8,0xF0,0x80,0xF0,0xC0,0xC0,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x00,0xC0,0xC0,0xC0,0xC0,0x80,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x80,0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0xFC,0xFC,0xFC,0x7F,0xFF,0xFF,0xFF,0xFB,0xFF,0xFF,0x3F,0x3C,
0x7C,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
0xB8,0xF8,0xF8,0xE0,0xF8,0xF8,0xF8,0x07,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,
0x80,0xC0,0xE0,0xE0,0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0xF8,0xFC,0xFF,0xBF,0xFF,0xFF,0xFF,0x7F,0x7F,0x7B,0xFB,0xFC,
0xF8,0xE0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0xE0,0xFF,
0xFF,0x9F,0xE7,0xF8,0xFF,0xFF,0xBF,0xFC,0x7C,0x7F,0x7C,0x78,0x00,0x00,0x00,0x00,
0x00,0xE0,0xFE,0xFE,0x1F,0xF9,0xFD,0xE6,0xFF,0xFF,0xFF,0xFF,0xE7,0xE7,0xC0,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xFE,0xFF,
0xFF,0xFF,0xFF,0xE7,0xFF,0xFF,0xFF,0x3C,0xFF,0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0xFF,0xFF,0xFF,0xFF,
0xFF,0xDF,0x1F,0x07,0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0xC0,0xF8,0xFF,0xFF,0x3F,0xFF,0xFF,0xFF,0xE5,0xFE,0xFE,0xDE,0xDD,0x01,
0x01,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0x1F,
0x3F,0x1F,0xC7,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0xF8,0x00,0x00,0x00,0x00,0xFC,0xF8,
0x00,0x01,0xE1,0xE1,0xFC,0xFE,0x7F,0x0F,0xFF,0xFF,0xFF,0xFF,0x7F,0x7F,0x1F,0x0F,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,
0x7F,0x03,0x00,0x00,0xFF,0xFF,0xFF,0x1E,0xFF,0xFF,0xFF,0xFF,0x01,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x80,0x80,0xE0,0xE0,0xF0,0xFF,0xFF,
0xFF,0xFF,0xFE,0xFE,0xFE,0xFC,0xFC,0xF0,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x0F,0x1F,0x1F,0xF3,0xFC,0xFE,0xFC,0xFC,0x7F,0xFF,0xFF,0xFF,0xFF,0x0F,0x0F,
0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0xFF,0xFF,0x81,0x00,
0x00,0xEF,0xFF,0xFF,0x7F,0xFF,0xFF,0xF1,0x80,0x00,0x00,0x00,0xE0,0xFF,0x6F,0x01,
0x00,0x00,0x01,0x01,0x01,0x01,0x00,0x7F,0xFF,0xFF,0xFF,0x01,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x78,0x7E,0x7F,0x3F,0x07,
0x01,0x00,0x00,0x00,0x01,0x00,0x00,0x3E,0x79,0x7F,0x7F,0x7F,0x7E,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x08,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x0F,0x0F,0x07,0x01,
0x01,0x00,0x00,0x0E,0x07,0x07,0x0F,0x3F,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0xC0,0xC0,0xFF,0xFF,0xFF,0xFF,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0x79,0xF8,
0xFE,0x3F,0x0F,0x07,0x00,0x3F,0xFF,0xFF,0xFF,0xFE,0xFE,0xFE,0xFF,0xFF,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x3F,0x1F,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x07,0x07,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0xF8,0xF8,0x1C,0x3C,0xFC,0xFC,0xC0,0xFC,0xFC,0x00,0xFC,0xFC,0xC0,0xFC,0xF8,
0xE0,0xFC,0xFC,0xF8,0x1C,0xDC,0xDC,0x1C,0xFC,0xFC,0x3C,0xFC,0xDC,0xC0,0xFC,0xE0,
0xF8,0x1C,0x3C,0xF8,0xFC,0xFC,0x00,0xFC,0xFC,0x00,0x00,0x00,0xFC,0xFC,0xFC,0xFC,
0xF8,0xFC,0xFC,0xF8,0xDC,0xDC,0x1C,0xFC,0x1C,0xFC,0xFC,0x1C,0xFC,0xFC,0xFC,0xFC,
0x00,0xFC,0xFC,0x1C,0xFC,0x1C,0xFC,0xDC,0xDC,0x00,0x00,0x00,0xF8,0xF8,0x1C,0x3C,
0xF8,0xFC,0xFC,0xDC,0x00,0x00,0x00,0x1C,0xFC,0xFC,0x1C,0xFC,0xDC,0xDC,0xF8,0x3C,
0x1C,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xFC,0xE0,0xC0,0xFC,0xF8,0xFC,0x1C,0xFC,0xF8,
0xFC,0xFC,0x00,0xE0,0x3C,0x1C,0x1C,0xF8,0xE0,0xF8,0x3C,0xDC,0xFC,0xFC,0xE0,0xFC,
0x00,0x0F,0x1F,0x1C,0x1E,0x1F,0x1F,0x01,0x1F,0x1F,0x1F,0x03,0x0F,0x1F,0x1F,0x01,
0x03,0x1F,0x13,0x0F,0x1C,0x1F,0x1F,0x1F,0x1F,0x1D,0x1C,0x1F,0x1D,0x01,0x1F,0x03,
0x0F,0x1C,0x1E,0x0F,0x0F,0x1F,0x1C,0x1F,0x0F,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,
0x03,0x1F,0x1F,0x1E,0x1F,0x0F,0x03,0x1F,0x00,0x1F,0x1F,0x00,0x1F,0x1F,0x0F,0x1F,
0x1C,0x1F,0x0F,0x00,0x1F,0x00,0x1F,0x1D,0x1D,0x00,0x00,0x00,0x0F,0x0F,0x1C,0x1E,
0x0F,0x1F,0x1F,0x01,0x00,0x00,0x00,0x00,0x1F,0x1F,0x00,0x1F,0x1D,0x1D,0x0F,0x1F,
0x1C,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1C,0x03,0x0F,0x1F,0x0F,0x1F,0x1C,0x1F,0x0F,
0x1F,0x1F,0x1C,0x1F,0x1E,0x1C,0x1C,0x0F,0x0F,0x0F,0x1E,0x1F,0x1F,0x00,0x1F,0x00,

};
